<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Set Azure AD Connect Staging Mode via PowerShell | diecknet</title>
<meta name=keywords content="azure ad,powershell,azure ad connect"><meta name=description content="Here&rsquo;s a quick tip on howto enable or disable the Staging Mode in Azure AD Connect via PowerShell. Sadly there is no native Cmdlet in the style of Set-ADSyncStagingMode or something like that.
In this article I&rsquo;ll first explain the approach and then later on list the full command block you can use. So feel free to skip below to the end of the post. The following PowerShell Cmdlets have to get executed on the Azure AD Connect Server."><meta name=author content="Andreas Dieckmann"><link rel=canonical href=https://diecknet.de/en/2022/07/21/Azure-AD-Connect-Staging-mode-PowerShell/><link crossorigin=anonymous href=/assets/css/stylesheet.75a517428f403193483801122d6350f6956c3bb6bf5c6504311f8c24e6bab3e7.css integrity="sha256-daUXQo9AMZNIOAESLWNQ9pVsO7a/XGUEMR+MJOa6s+c=" rel="preload stylesheet" as=style><link rel=icon href=https://diecknet.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://diecknet.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://diecknet.de/favicon-32x32.png><link rel=apple-touch-icon href=https://diecknet.de/apple-touch-icon.png><link rel=mask-icon href=https://diecknet.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://diecknet.de/en/2022/07/21/Azure-AD-Connect-Staging-mode-PowerShell/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Set Azure AD Connect Staging Mode via PowerShell"><meta property="og:description" content="Here&rsquo;s a quick tip on howto enable or disable the Staging Mode in Azure AD Connect via PowerShell. Sadly there is no native Cmdlet in the style of Set-ADSyncStagingMode or something like that.
In this article I&rsquo;ll first explain the approach and then later on list the full command block you can use. So feel free to skip below to the end of the post. The following PowerShell Cmdlets have to get executed on the Azure AD Connect Server."><meta property="og:type" content="article"><meta property="og:url" content="https://diecknet.de/en/2022/07/21/Azure-AD-Connect-Staging-mode-PowerShell/"><meta property="og:image" content="https://diecknet.de/images/2022/2022-07-21_Azure-AD-Connect-Staging-mode-is-enabled.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-21T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-21T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://diecknet.de/images/2022/2022-07-21_Azure-AD-Connect-Staging-mode-is-enabled.png"><meta name=twitter:title content="Set Azure AD Connect Staging Mode via PowerShell"><meta name=twitter:description content="Here&rsquo;s a quick tip on howto enable or disable the Staging Mode in Azure AD Connect via PowerShell. Sadly there is no native Cmdlet in the style of Set-ADSyncStagingMode or something like that.
In this article I&rsquo;ll first explain the approach and then later on list the full command block you can use. So feel free to skip below to the end of the post. The following PowerShell Cmdlets have to get executed on the Azure AD Connect Server."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://diecknet.de/en/posts/"},{"@type":"ListItem","position":2,"name":"Set Azure AD Connect Staging Mode via PowerShell","item":"https://diecknet.de/en/2022/07/21/Azure-AD-Connect-Staging-mode-PowerShell/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Set Azure AD Connect Staging Mode via PowerShell","name":"Set Azure AD Connect Staging Mode via PowerShell","description":"Here\u0026rsquo;s a quick tip on howto enable or disable the Staging Mode in Azure AD Connect via PowerShell. Sadly there is no native Cmdlet in the style of Set-ADSyncStagingMode or something like that.\nIn this article I\u0026rsquo;ll first explain the approach and then later on list the full command block you can use. So feel free to skip below to the end of the post. The following PowerShell Cmdlets have to get executed on the Azure AD Connect Server.\n","keywords":["azure ad","powershell","azure ad connect"],"articleBody":"Here’s a quick tip on howto enable or disable the Staging Mode in Azure AD Connect via PowerShell. Sadly there is no native Cmdlet in the style of Set-ADSyncStagingMode or something like that.\nIn this article I’ll first explain the approach and then later on list the full command block you can use. So feel free to skip below to the end of the post. The following PowerShell Cmdlets have to get executed on the Azure AD Connect Server.\nExecute these commands on your own risk.\nList current Azure AD Connect Staging mode setting First of all we can retrieve the current Azure AD Connect Settings using Get-ADSyncGlobalSettings.\n1 2 $aadSyncSettings=Get-ADSyncGlobalSettings $aadSyncSettings Investigate the Parameters of the ADSyncGlobalSettings Object So the interesting stuff is hidden in the “parameters”-property. The settings regarding the Staging Mode lays in “Microsoft.Synchronize.StagingMode”.\n1 $aadSyncSettings.parameters Change the Staging Mode To configure the Staging Mode we need to set “Microsoft.Synchronize.StagingMode” to either “True” (enable Staging mode) or “False” (disable Staging mode).\n1 2 # to disable AAD Connect Staging mode ($aadSyncSettings.parameters | ?{$_.name -eq \"Microsoft.Synchronize.StagingMode\"}).value=\"False\" 1 2 # to enable AAD Connect Staging mode ($aadSyncSettings.parameters | ?{$_.name -eq \"Microsoft.Synchronize.StagingMode\"}).value=\"True\" Actually SET the Staging Mode Haha, yes. We’re not done yet. As of right now, we only have a PowerShell Object (“Microsoft.IdentityManagement.PowerShell.ObjectModel.GlobalSettings”) representing the Azure AD Connect settings. And changing that Object doesn’t change the actual configuration of Azure AD Connect. So we have to set the actual configuration to our modified Settings Object.\n1 Set-ADSyncGlobalSettings $aadSyncSettings Afterwards I verified in the GUI (Azure AD Connect Wizard) for the desired result. In my case the Staging Mode was enabled now. Awesome!\nSummary - Full Code Snippets After we gathered all these informations, we can create our own short PowerShell Code Snippets to check/enable/disable the Azure AD Connect Staging mode.\nSnippet to check for Azure AD Connect Staging Mode 1 2 3 4 $aadSyncSettings=Get-ADSyncGlobalSettings ($aadSyncSettings.parameters | ?{$_.name -eq \"Microsoft.Synchronize.StagingMode\"}).value # output \"False\" means Staging mode is disabled # output \"True\" means Staging mode is enabled Snippet to Disable Azure AD Connect Staging Mode 1 2 3 $aadSyncSettings=Get-ADSyncGlobalSettings ($aadSyncSettings.parameters | ?{$_.name -eq \"Microsoft.Synchronize.StagingMode\"}).value=\"False\" Set-ADSyncGlobalSettings $aadSyncSettings Snippet to Enable Azure AD Connect Staging Mode 1 2 3 $aadSyncSettings=Get-ADSyncGlobalSettings ($aadSyncSettings.parameters | ?{$_.name -eq \"Microsoft.Synchronize.StagingMode\"}).value=\"True\" Set-ADSyncGlobalSettings $aadSyncSettings ","wordCount":"374","inLanguage":"en","image":"https://diecknet.de/images/2022/2022-07-21_Azure-AD-Connect-Staging-mode-is-enabled.png","datePublished":"2022-07-21T00:00:00Z","dateModified":"2022-07-21T00:00:00Z","author":{"@type":"Person","name":"Andreas Dieckmann"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://diecknet.de/en/2022/07/21/Azure-AD-Connect-Staging-mode-PowerShell/"},"publisher":{"@type":"Organization","name":"diecknet","logo":{"@type":"ImageObject","url":"https://diecknet.de/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://diecknet.de/en/ accesskey=h title="diecknet (Alt + H)">diecknet</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://diecknet.de/de/ title=Deutsch aria-label=Deutsch>Deutsch</a></li><li><a href=https://diecknet.de/en/ title=English aria-label=English><b>English</b></a></li></ul></div></div><ul id=menu><li><a href=https://diecknet.de/en/ title=Home><span>Home</span></a></li><li><a href=https://diecknet.de/en/services/ title=Services><span>Services</span></a></li><li><a href=https://diecknet.de/en/about/ title=About><span>About</span></a></li><li><a href=https://diecknet.de/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://diecknet.de/en/archive/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://diecknet.de/en/>Home</a>&nbsp;»&nbsp;<a href=https://diecknet.de/en/posts/>Posts</a></div><h1 class=post-title>Set Azure AD Connect Staging Mode via PowerShell</h1><div class=post-meta><span title='2022-07-21 00:00:00 +0000 UTC'>2022-07-21</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Andreas Dieckmann&nbsp;|&nbsp;<a href=https://github.com/diecknet/diecknet-blog/tree/main/content/en/posts/2022/2022-07-21-Azure-AD-Connect-Staging-mode-PowerShell.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><figure class=entry-cover><img loading=lazy src=https://diecknet.de/images/2022/2022-07-21_Azure-AD-Connect-Staging-mode-is-enabled.png alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#list-current-azure-ad-connect-staging-mode-setting aria-label="List current Azure AD Connect Staging mode setting">List current Azure AD Connect Staging mode setting</a></li><li><a href=#investigate-the-parameters-of-the-adsyncglobalsettings-object aria-label="Investigate the Parameters of the ADSyncGlobalSettings Object">Investigate the Parameters of the ADSyncGlobalSettings Object</a></li><li><a href=#change-the-staging-mode aria-label="Change the Staging Mode">Change the Staging Mode</a></li><li><a href=#actually-set-the-staging-mode aria-label="Actually SET the Staging Mode">Actually SET the Staging Mode</a></li><li><a href=#summary---full-code-snippets aria-label="Summary - Full Code Snippets">Summary - Full Code Snippets</a><ul><li><a href=#snippet-to-check-for-azure-ad-connect-staging-mode aria-label="Snippet to check for Azure AD Connect Staging Mode">Snippet to check for Azure AD Connect Staging Mode</a></li><li><a href=#snippet-to-disable-azure-ad-connect-staging-mode aria-label="Snippet to Disable Azure AD Connect Staging Mode">Snippet to Disable Azure AD Connect Staging Mode</a></li><li><a href=#snippet-to-enable-azure-ad-connect-staging-mode aria-label="Snippet to Enable Azure AD Connect Staging Mode">Snippet to Enable Azure AD Connect Staging Mode</a></li></ul></li></ul></div></details></div><div class=post-content><p>Here&rsquo;s a quick tip on howto enable or disable the Staging Mode in Azure AD Connect via PowerShell. Sadly there is no native Cmdlet in the style of <code>Set-ADSyncStagingMode</code> or something like that.</p><p>In this article I&rsquo;ll first explain the approach and then later on list the full command block you can use. So feel free to skip below to the end of the post. The following PowerShell Cmdlets have to get executed on the Azure AD Connect Server.</p><p><strong>Execute these commands on your own risk.</strong></p><h2 id=list-current-azure-ad-connect-staging-mode-setting>List current Azure AD Connect Staging mode setting<a hidden class=anchor aria-hidden=true href=#list-current-azure-ad-connect-staging-mode-setting>#</a></h2><p>First of all we can retrieve the current Azure AD Connect Settings using <code>Get-ADSyncGlobalSettings</code>.</p><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#41a1c0>$aadSyncSettings</span>=<span style=color:#d0a8ff>Get-ADSyncGlobalSettings</span>
</span></span><span style=display:flex><span><span style=color:#41a1c0>$aadSyncSettings</span>
</span></span></code></pre></td></tr></table></div></div><p><a href=/images/2022/2022-07-21_AAD-Connect-Settings-Overview-PowerShell.png><img loading=lazy src=/images/2022/2022-07-21_AAD-Connect-Settings-Overview-PowerShell.png alt="Screenshot of PowerShell Code Execution - Retrieve Azure AD Connect Settings" title="Screenshot of PowerShell Code Execution - Retrieve Azure AD Connect Settings"></a></p><h2 id=investigate-the-parameters-of-the-adsyncglobalsettings-object>Investigate the Parameters of the ADSyncGlobalSettings Object<a hidden class=anchor aria-hidden=true href=#investigate-the-parameters-of-the-adsyncglobalsettings-object>#</a></h2><p>So the interesting stuff is hidden in the &ldquo;parameters&rdquo;-property. The settings regarding the Staging Mode lays in &ldquo;Microsoft.Synchronize.StagingMode&rdquo;.</p><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#41a1c0>$aadSyncSettings</span>.parameters
</span></span></code></pre></td></tr></table></div></div><p><a href=/images/2022/2022-07-21_AzureAD-Connect-Staging-Mode-spotted-PowerShell.png><img loading=lazy src=/images/2022/2022-07-21_AzureAD-Connect-Staging-Mode-spotted-PowerShell.png alt="Screenshot of PowerShell Code Execution - Found the Staging mode" title="Screenshot of PowerShell Code Execution - Found the Staging mode"></a></p><h2 id=change-the-staging-mode>Change the Staging Mode<a hidden class=anchor aria-hidden=true href=#change-the-staging-mode>#</a></h2><p>To configure the Staging Mode we need to set &ldquo;Microsoft.Synchronize.StagingMode&rdquo; to either &ldquo;True&rdquo; (enable Staging mode) or &ldquo;False&rdquo; (disable Staging mode).</p><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#6c7986># to disable AAD Connect Staging mode</span>
</span></span><span style=display:flex><span>(<span style=color:#41a1c0>$aadSyncSettings</span>.parameters | ?{<span style=color:#41a1c0>$_</span>.name -eq <span style=color:#fc6a5d>&#34;Microsoft.Synchronize.StagingMode&#34;</span>}).value=<span style=color:#fc6a5d>&#34;False&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#6c7986># to enable AAD Connect Staging mode</span>
</span></span><span style=display:flex><span>(<span style=color:#41a1c0>$aadSyncSettings</span>.parameters | ?{<span style=color:#41a1c0>$_</span>.name -eq <span style=color:#fc6a5d>&#34;Microsoft.Synchronize.StagingMode&#34;</span>}).value=<span style=color:#fc6a5d>&#34;True&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=actually-set-the-staging-mode>Actually SET the Staging Mode<a hidden class=anchor aria-hidden=true href=#actually-set-the-staging-mode>#</a></h2><p>Haha, yes. We&rsquo;re not done yet. As of right now, we only have a PowerShell Object (&ldquo;Microsoft.IdentityManagement.PowerShell.ObjectModel.GlobalSettings&rdquo;) representing the Azure AD Connect settings. And changing that Object doesn&rsquo;t change the actual configuration of Azure AD Connect. So we have to set the actual configuration to our modified Settings Object.</p><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#d0a8ff>Set-ADSyncGlobalSettings</span> <span style=color:#41a1c0>$aadSyncSettings</span>
</span></span></code></pre></td></tr></table></div></div><p><a href=/images/2022/2022-07-21_AzureAD-Connect-Staging-mode-set-by-powershell.png><img loading=lazy src=/images/2022/2022-07-21_AzureAD-Connect-Staging-mode-set-by-powershell.png alt="Screenshot of PowerShell Code Execution - Changing and setting the Staging mode" title="Screenshot of PowerShell Code Execution - Changing and setting the Staging mode"></a></p><p>Afterwards I verified in the GUI (Azure AD Connect Wizard) for the desired result. In my case the Staging Mode was enabled now. Awesome!</p><p><a href=/images/2022/2022-07-21_Azure-AD-Connect-Staging-mode-is-enabled.png><img loading=lazy src=/images/2022/2022-07-21_Azure-AD-Connect-Staging-mode-is-enabled.png alt="Verification of Azure AD Connect Staging Mode in the Wizard" title="Verification of Azure AD Connect Staging Mode in the Wizard"></a></p><h2 id=summary---full-code-snippets>Summary - Full Code Snippets<a hidden class=anchor aria-hidden=true href=#summary---full-code-snippets>#</a></h2><p>After we gathered all these informations, we can create our own short PowerShell Code Snippets to check/enable/disable the Azure AD Connect Staging mode.</p><h3 id=snippet-to-check-for-azure-ad-connect-staging-mode>Snippet to check for Azure AD Connect Staging Mode<a hidden class=anchor aria-hidden=true href=#snippet-to-check-for-azure-ad-connect-staging-mode>#</a></h3><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#41a1c0>$aadSyncSettings</span>=<span style=color:#d0a8ff>Get-ADSyncGlobalSettings</span>
</span></span><span style=display:flex><span>(<span style=color:#41a1c0>$aadSyncSettings</span>.parameters | ?{<span style=color:#41a1c0>$_</span>.name -eq <span style=color:#fc6a5d>&#34;Microsoft.Synchronize.StagingMode&#34;</span>}).value
</span></span><span style=display:flex><span><span style=color:#6c7986># output &#34;False&#34; means Staging mode is disabled</span>
</span></span><span style=display:flex><span><span style=color:#6c7986># output &#34;True&#34; means Staging mode is enabled</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=snippet-to-disable-azure-ad-connect-staging-mode>Snippet to Disable Azure AD Connect Staging Mode<a hidden class=anchor aria-hidden=true href=#snippet-to-disable-azure-ad-connect-staging-mode>#</a></h3><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#41a1c0>$aadSyncSettings</span>=<span style=color:#d0a8ff>Get-ADSyncGlobalSettings</span>
</span></span><span style=display:flex><span>(<span style=color:#41a1c0>$aadSyncSettings</span>.parameters | ?{<span style=color:#41a1c0>$_</span>.name -eq <span style=color:#fc6a5d>&#34;Microsoft.Synchronize.StagingMode&#34;</span>}).value=<span style=color:#fc6a5d>&#34;False&#34;</span>
</span></span><span style=display:flex><span><span style=color:#d0a8ff>Set-ADSyncGlobalSettings</span> <span style=color:#41a1c0>$aadSyncSettings</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=snippet-to-enable-azure-ad-connect-staging-mode>Snippet to Enable Azure AD Connect Staging Mode<a hidden class=anchor aria-hidden=true href=#snippet-to-enable-azure-ad-connect-staging-mode>#</a></h3><div class=highlight><div style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#41a1c0>$aadSyncSettings</span>=<span style=color:#d0a8ff>Get-ADSyncGlobalSettings</span>
</span></span><span style=display:flex><span>(<span style=color:#41a1c0>$aadSyncSettings</span>.parameters | ?{<span style=color:#41a1c0>$_</span>.name -eq <span style=color:#fc6a5d>&#34;Microsoft.Synchronize.StagingMode&#34;</span>}).value=<span style=color:#fc6a5d>&#34;True&#34;</span>
</span></span><span style=display:flex><span><span style=color:#d0a8ff>Set-ADSyncGlobalSettings</span> <span style=color:#41a1c0>$aadSyncSettings</span>
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://diecknet.de/en/tags/azure-ad/>Azure Ad</a></li><li><a href=https://diecknet.de/en/tags/powershell/>Powershell</a></li><li><a href=https://diecknet.de/en/tags/azure-ad-connect/>Azure Ad Connect</a></li></ul><div class=share-buttons></div></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://diecknet.de/en/>diecknet</a></span>
&nbsp;|&nbsp;
<span><a href=https://diecknet.de/en/legal/>Imprint</a>
</span>&nbsp;|&nbsp;<span>
<a href=https://diecknet.de/en/privacy/>Privacy</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script type=text/javascript>var _paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){t="//nc.diecknet.de/mt/",_paq.push(["setTrackerUrl",t+"mdata"]),_paq.push(["setSiteId","1"]);var t,n=document,e=n.createElement("script"),s=n.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.defer=!0,e.src=t+"m.js",s.parentNode.insertBefore(e,s)}()</script><noscript><p><img src="https://nc.diecknet.de/mt/mdata?idsite=1&amp;rec=1" style=border:0 alt></p></noscript></body></html>